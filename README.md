# get-data-pkgh 
Получение данных с сайта колледжа
Скрапинг + парсинг на nodejs
## Контент
+ [Быстрый старт](#Быстрый-старт)
+ [Инициализация](#Инициализация)
+ [Генерация индификатора](#Генерация-индификатора)
+ [Расписание](#Расписание)
  + [Получить весь список](#Получить-весь-список)
  + [Структура данных расписания](#Cтруктура-даных-расписания)
  + [Получить конкретную группу](#Получить-конкретную-группу)
+ [Раздел преподаватели](#Раздел-преподаватели)
  + [Получение всех постов](#Получение-всех-постов)
  + [Структура данных раздела преподаватели](#Cтруктура-даных-преподаватели)

---
### Быстрый старт
```
npm install get-data-pkgh
```
``` node
    const dPkgh = require('get-data-pkgh');
    const pkgh = new dPkgh();
    pkgh.getSchedule().then((r) => console.log(r));
```
---
## Инициализация
cache bool(true) - Кеш загрузки и обработки
timeCache(150000)ms - Время жизни кеша
``` node
    const dPkgh = require('get-data-pkgh');
    const cache = true;
    const timeCache = 30000;
    const pkgh = new dPkgh(cache, timeCache);
```
---
## Генерация индификатора
Позволяет получить индификатор на основе строки убирая спец символы и спам символы
``` node
  const generateId = require('get-data-pkgh').generateId;
  console.log(generateId('МР-18-6'));
  // => 'MR186'
```
---
## Расписание
### Получить весь список
``` node
    pkgh.getSchedule().then((r) => console.log(r));
```
### Структура данных расписания
``` node
{
  ID: Индификатор группы {
    table: таблицы одной группы [
      dayWeek: День недели,
      lesson: [
        {
          numSubject: Предмет по числителю,
          numTeacher: Преподователь по числителю,
          denSubject: Предмет по знаменятилю,
          denTeacher: Преподователь по знаменатилю,
        }
        ...
      ]
      ...
    ]
    name: Имя группы,
    specialty: Специальность группы,
  }
  EE1934kz: {
    table: [ [Object]  ],
    name: 'ЭЭ-19-34кз',
    specialty: 'Информация Заочного отделения'
  },
  YuS1731kz: {
    table: [ [Object]  ],
    name: 'ЮС-17-31кз',
    specialty: 'Информация Заочного отделения'
  },
  ...
}
```
### Получить конкретную группу
** При получении конкретной группы будет загружена и обработана вся страница колледжа **
``` node
    const generateId = dPkgh.generateId;
    const id = generateId('КП-18-25');
    pkgh.getScheduleGroup(id).then((r) => console.log(r));
```

---
## Раздел преподаватели 

### Получение всех постов
** Будет загружено ~10 страниц с сайта колледжа **
``` node
  pkgh.getTeacher().then((r) => console.log(r));
```
### Структура данных раздела преподаватели 
``` node 
[
  {
    id: Индификатор,
    text: Текст к посту,
    author: {
      text: ФИО автора,
      link: Ссылка на автора,
    },
    time: Время публикации,
    tag: {
      text: Текст тега,
      link: Ссылка на все посты с данным тегом,
    },
    downoload: [
      {
        link: Ссылка на скачивание,
        text: Текст ссылки,
      },
      ...
    ]
  }
  ...
]
```
